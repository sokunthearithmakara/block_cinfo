define("block_cinfo/main",["exports","jquery","core/fragment","core/modal"],(function(_exports,_jquery,_fragment,_modal){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_fragment=_interopRequireDefault(_fragment),_modal=_interopRequireDefault(_modal),(0,_jquery.default)("body.path-course-view div.course-content").length>0){var array=(0,_jquery.default)("#modarray").data("modarray");const tools='<span id="cinfo-toolbar" class="d-block position-sticky">'.concat((0,_jquery.default)("#cinfo-wrapper").html(),"</span>");(0,_jquery.default)(tools).insertBefore("div.course-content"),(0,_jquery.default)(".block_cinfo #cinfo-wrapper").remove(),(0,_jquery.default)(document).on("click","#btn-search",(function(){(0,_jquery.default)("#cinfo-block-search").toggleClass("d-none d-block"),(0,_jquery.default)("#cinfo-block-search input").focus(),(0,_jquery.default)("#cinfo-block-search input").val(""),(0,_jquery.default)("#cinfo-block-search .input-group").toggleClass("w-100"),(0,_jquery.default)("#searchresults").html(""),(0,_jquery.default)("#toolbar").css("opacity","0")})),(0,_jquery.default)(document).on("click","#cinfo-block-search .input-group-append.search-close",(function(){(0,_jquery.default)("#cinfo-block-search input").val(""),(0,_jquery.default)("#cinfo-block-search").toggleClass("d-none d-block"),(0,_jquery.default)("#cinfo-block-search .input-group").toggleClass("w-100"),(0,_jquery.default)("#searchresults").html(""),(0,_jquery.default)("#toolbar").css("opacity","1")})),(0,_jquery.default)(document).on("input","#cinfo-block-search input",(function(){var searchTerm=(0,_jquery.default)(this).val().toLowerCase();if(searchTerm.length>0){var searchResults=array.filter((function(item){return item.name.toLowerCase().indexOf(searchTerm)>-1})),searchResultsHTML="";searchResults.length>0?searchResults.forEach((function(item,index){searchResultsHTML+='<a class="list-group-item px-2 py-1 text-left '.concat(0==index?"active":"",'"\n            href="').concat(item.url,'">').concat(item.icon).concat(item.name,"</a>")})):(0,_jquery.default)("#searchresults").html(""),(0,_jquery.default)("#searchresults").html(searchResultsHTML)}else(0,_jquery.default)("#searchresults").html("")})),(0,_jquery.default)(document).on("keydown","#cinfo-block-search input",(function(e){27===e.keyCode&&(e.preventDefault(),(0,_jquery.default)("#cinfo-block-search .input-group-append").trigger("click"));var current=(0,_jquery.default)("#searchresults a.list-group-item.active");if(40===e.keyCode){e.preventDefault();var next=current.next();next.length>0&&(current.removeClass("active"),next.addClass("active"))}if(38===e.keyCode){e.preventDefault();var prev=current.prev();prev.length>0&&(current.removeClass("active"),prev.addClass("active"))}13===e.keyCode&&(e.preventDefault(),current.length>0&&(window.location.href=current.attr("href")))}));const canScrollRight=()=>{const toolbar=document.querySelector("#cinfo-toolbar .scrollbar-0");return toolbar.scrollWidth-toolbar.scrollLeft-1>toolbar.clientWidth},canScrollLeft=()=>document.querySelector("#cinfo-toolbar .scrollbar-0").scrollLeft>0,checkScroll=()=>{canScrollLeft()?(0,_jquery.default)("#scroll-left").removeClass("d-none"):(0,_jquery.default)("#scroll-left").addClass("d-none"),canScrollRight()?(0,_jquery.default)("#scroll-right").removeClass("d-none"):(0,_jquery.default)("#scroll-right").addClass("d-none")};checkScroll(),(0,_jquery.default)(document).on("click","#scroll-right",(function(){const toolbar=document.querySelector("#cinfo-toolbar .scrollbar-0");toolbar.scrollBy({left:toolbar.clientWidth,behavior:"smooth"}),setTimeout(checkScroll,500)})),(0,_jquery.default)(document).on("click","#scroll-left",(function(){const toolbar=document.querySelector("#cinfo-toolbar .scrollbar-0");toolbar.scrollBy({left:-toolbar.clientWidth,behavior:"smooth"}),setTimeout(checkScroll,500)})),(0,_jquery.default)(window).on("resize",checkScroll),(0,_jquery.default)(document).on("click","#btn-courseinfo",(function(){const contextid=(0,_jquery.default)(this).data("contextid");_modal.default.create({title:(0,_jquery.default)("#courseinfo-title").html(),body:_fragment.default.loadFragment("block_cinfo","course_intro",contextid,{contextid:contextid,parentcontextid:M.cfg.contextid}),show:!0,large:!0,isVerticallyCentered:!0})}))}_exports.init=()=>{}}));

//# sourceMappingURL=main.min.js.map