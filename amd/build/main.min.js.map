{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["/* eslint-disable */\nimport $ from 'jquery';\nimport Fragment from 'core/fragment';\nimport Modal from 'core/modal';\n\nif ($(\"body.path-course-view div.course-content\").length > 0) {\n    var array = $(\"#modarray\").data(\"modarray\");\n    const tools = `<span id=\"cinfo-toolbar\" class=\"d-block position-sticky\">${$(\"#cinfo-wrapper\").html()}</span>`;\n    $(tools).insertBefore(\"div.course-content\");\n    $(\".block_cinfo #cinfo-wrapper\").remove();\n\n    $(document).on(\"click\", \"#btn-search\", function () {\n        $(\"#cinfo-block-search\").toggleClass(\"d-none d-block\");\n        $(\"#cinfo-block-search input\").focus();\n        $(\"#cinfo-block-search input\").val(\"\");\n        $(\"#cinfo-block-search .input-group\").toggleClass(\"w-100\");\n        $(\"#searchresults\").html(\"\");\n        $(\"#toolbar\").css(\"opacity\", \"0\");\n    });\n\n    $(document).on(\"click\", \"#cinfo-block-search .input-group-append.search-close\", function () {\n        $(\"#cinfo-block-search input\").val(\"\");\n        $(\"#cinfo-block-search\").toggleClass(\"d-none d-block\");\n        $(\"#cinfo-block-search .input-group\").toggleClass(\"w-100\");\n        $(\"#searchresults\").html(\"\");\n        $(\"#toolbar\").css(\"opacity\", \"1\");\n    });\n\n    $(document).on(\"input\", \"#cinfo-block-search input\", function () {\n        // Search through the array \"name\" and render the results\n        var searchTerm = $(this).val().toLowerCase();\n        if (searchTerm.length > 0) {\n            var searchResults = array.filter(function (item) {\n                return item.name.toLowerCase().indexOf(searchTerm) > -1;\n            });\n            var searchResultsHTML = \"\";\n            if (searchResults.length > 0) {\n                searchResults.forEach(function (item, index) {\n                    searchResultsHTML += `<a class=\"list-group-item px-2 py-1 text-left ${index == 0 ? \"active\" : \"\"}\"\n            href=\"${item.url}\">${item.icon}${item.name}</a>`;\n                });\n            } else {\n                $(\"#searchresults\").html(\"\");\n            }\n            $(\"#searchresults\").html(searchResultsHTML);\n        } else {\n            $(\"#searchresults\").html(\"\");\n        }\n    });\n\n    $(document).on(\"keydown\", \"#cinfo-block-search input\", function (e) {\n        // Close the search results when the user presses the escape key\n        if (e.keyCode === 27) {\n            e.preventDefault();\n            $(\"#cinfo-block-search .input-group-append\").trigger(\"click\");\n        }\n        var current = $(\"#searchresults a.list-group-item.active\");\n        // Navigate through the search results using the arrow keys\n        if (e.keyCode === 40) {\n            e.preventDefault();\n            var next = current.next();\n            if (next.length > 0) {\n                current.removeClass(\"active\");\n                next.addClass(\"active\");\n            }\n        }\n        if (e.keyCode === 38) {\n            e.preventDefault();\n            var prev = current.prev();\n            if (prev.length > 0) {\n                current.removeClass(\"active\");\n                prev.addClass(\"active\");\n            }\n        }\n        // Open the selected search result when the user presses the enter key\n        if (e.keyCode === 13) {\n            e.preventDefault();\n            if (current.length > 0) {\n                window.location.href = current.attr(\"href\");\n            }\n        }\n    });\n\n    // Handle scrollbuttons\n    const canScrollRight = () => {\n        const toolbar = document.querySelector(\"#cinfo-toolbar .scrollbar-0\");\n        return toolbar.scrollWidth - toolbar.scrollLeft - 1 > toolbar.clientWidth;\n    };\n\n    const canScrollLeft = () => {\n        const toolbar = document.querySelector(\"#cinfo-toolbar .scrollbar-0\");\n        return toolbar.scrollLeft > 0;\n    };\n\n    const checkScroll = () => {\n        if (canScrollLeft()) {\n            $(\"#scroll-left\").removeClass(\"d-none\");\n        } else {\n            $(\"#scroll-left\").addClass(\"d-none\");\n        }\n\n        if (canScrollRight()) {\n            $(\"#scroll-right\").removeClass(\"d-none\");\n        } else {\n            $(\"#scroll-right\").addClass(\"d-none\");\n        }\n    };\n\n    checkScroll();\n\n    $(document).on(\"click\", \"#scroll-right\", function () {\n        const toolbar = document.querySelector(\"#cinfo-toolbar .scrollbar-0\");\n        toolbar.scrollBy({ left: toolbar.clientWidth, behavior: 'smooth' });\n        setTimeout(checkScroll, 500);\n    });\n\n    $(document).on(\"click\", \"#scroll-left\", function () {\n        const toolbar = document.querySelector(\"#cinfo-toolbar .scrollbar-0\");\n        toolbar.scrollBy({ left: -toolbar.clientWidth, behavior: 'smooth' });\n        setTimeout(checkScroll, 500);\n    });\n\n    // On resize, check if the scroll buttons are needed\n    $(window).on('resize', checkScroll);\n\n    // Handle course intro modal\n    $(document).on(\"click\", \"#btn-courseinfo\", function () {\n        const contextid = $(this).data(\"contextid\");\n        const modal = Modal.create({\n            title: $(\"#courseinfo-title\").html(),\n            body: Fragment.loadFragment(\"block_cinfo\", \"course_intro\", contextid, { contextid: contextid, parentcontextid: M.cfg.contextid}),\n            show: true,\n            large: true,\n            isVerticallyCentered: true,\n        });\n    });\n}\n\n\nexport const init = () => {\n};\n\n"],"names":["length","array","data","tools","html","insertBefore","remove","document","on","toggleClass","focus","val","css","searchTerm","this","toLowerCase","searchResults","filter","item","name","indexOf","searchResultsHTML","forEach","index","url","icon","e","keyCode","preventDefault","trigger","current","next","removeClass","addClass","prev","window","location","href","attr","canScrollRight","toolbar","querySelector","scrollWidth","scrollLeft","clientWidth","canScrollLeft","checkScroll","scrollBy","left","behavior","setTimeout","contextid","Modal","create","title","body","Fragment","loadFragment","parentcontextid","M","cfg","show","large","isVerticallyCentered"],"mappings":"sZAKI,mBAAE,4CAA4CA,OAAS,EAAG,KACtDC,OAAQ,mBAAE,aAAaC,KAAK,kBAC1BC,0EAAoE,mBAAE,kBAAkBC,sCAC5FD,OAAOE,aAAa,0CACpB,+BAA+BC,6BAE/BC,UAAUC,GAAG,QAAS,eAAe,+BACjC,uBAAuBC,YAAY,sCACnC,6BAA6BC,4BAC7B,6BAA6BC,IAAI,wBACjC,oCAAoCF,YAAY,6BAChD,kBAAkBL,KAAK,wBACvB,YAAYQ,IAAI,UAAW,4BAG/BL,UAAUC,GAAG,QAAS,wDAAwD,+BAC1E,6BAA6BG,IAAI,wBACjC,uBAAuBF,YAAY,sCACnC,oCAAoCA,YAAY,6BAChD,kBAAkBL,KAAK,wBACvB,YAAYQ,IAAI,UAAW,4BAG/BL,UAAUC,GAAG,QAAS,6BAA6B,eAE7CK,YAAa,mBAAEC,MAAMH,MAAMI,iBAC3BF,WAAWb,OAAS,EAAG,KACnBgB,cAAgBf,MAAMgB,QAAO,SAAUC,aAChCA,KAAKC,KAAKJ,cAAcK,QAAQP,aAAe,KAEtDQ,kBAAoB,GACpBL,cAAchB,OAAS,EACvBgB,cAAcM,SAAQ,SAAUJ,KAAMK,OAClCF,2EAA+E,GAATE,MAAa,SAAW,mCAC9FL,KAAKM,iBAAQN,KAAKO,aAAOP,KAAKC,oCAGhC,kBAAkBf,KAAK,wBAE3B,kBAAkBA,KAAKiB,2CAEvB,kBAAkBjB,KAAK,2BAI/BG,UAAUC,GAAG,UAAW,6BAA6B,SAAUkB,GAE3C,KAAdA,EAAEC,UACFD,EAAEE,qCACA,2CAA2CC,QAAQ,cAErDC,SAAU,mBAAE,8CAEE,KAAdJ,EAAEC,QAAgB,CAClBD,EAAEE,qBACEG,KAAOD,QAAQC,OACfA,KAAK/B,OAAS,IACd8B,QAAQE,YAAY,UACpBD,KAAKE,SAAS,cAGJ,KAAdP,EAAEC,QAAgB,CAClBD,EAAEE,qBACEM,KAAOJ,QAAQI,OACfA,KAAKlC,OAAS,IACd8B,QAAQE,YAAY,UACpBE,KAAKD,SAAS,WAIJ,KAAdP,EAAEC,UACFD,EAAEE,iBACEE,QAAQ9B,OAAS,IACjBmC,OAAOC,SAASC,KAAOP,QAAQQ,KAAK,mBAM1CC,eAAiB,WACbC,QAAUjC,SAASkC,cAAc,sCAChCD,QAAQE,YAAcF,QAAQG,WAAa,EAAIH,QAAQI,aAG5DC,cAAgB,IACFtC,SAASkC,cAAc,+BACxBE,WAAa,EAG1BG,YAAc,KACZD,oCACE,gBAAgBb,YAAY,8BAE5B,gBAAgBC,SAAS,UAG3BM,qCACE,iBAAiBP,YAAY,8BAE7B,iBAAiBC,SAAS,WAIpCa,kCAEEvC,UAAUC,GAAG,QAAS,iBAAiB,iBAC/BgC,QAAUjC,SAASkC,cAAc,+BACvCD,QAAQO,SAAS,CAAEC,KAAMR,QAAQI,YAAaK,SAAU,WACxDC,WAAWJ,YAAa,4BAG1BvC,UAAUC,GAAG,QAAS,gBAAgB,iBAC9BgC,QAAUjC,SAASkC,cAAc,+BACvCD,QAAQO,SAAS,CAAEC,MAAOR,QAAQI,YAAaK,SAAU,WACzDC,WAAWJ,YAAa,4BAI1BX,QAAQ3B,GAAG,SAAUsC,iCAGrBvC,UAAUC,GAAG,QAAS,mBAAmB,iBACjC2C,WAAY,mBAAErC,MAAMZ,KAAK,aACjBkD,eAAMC,OAAO,CACvBC,OAAO,mBAAE,qBAAqBlD,OAC9BmD,KAAMC,kBAASC,aAAa,cAAe,eAAgBN,UAAW,CAAEA,UAAWA,UAAWO,gBAAiBC,EAAEC,IAAIT,YACrHU,MAAM,EACNC,OAAO,EACPC,sBAAsB,qBAMd"}